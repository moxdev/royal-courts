!function($,t,i){"use strict";var n=$("<div/>").attr("class","imagelightbox-loading").append($("<div/>")),e=$("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),o=$("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),a=e.add(o),r=$("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),l=$("<a/>",{class:"imagelightbox-close",html:"X"}),c=$("<div/>",{class:"imagelightbox-overlay"}),s=$("<a/>",{href:"#",class:"imagelightbox-navitem"}),u=$("<div/>",{class:"imagelightbox-nav"}),f=$("<div/>",{class:"imagelightbox-wrapper"}),g=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},h=!1!==g(),p=function(t,i,n){var e={},o=g();e[o+"transform"]="translateX("+i+")",e[o+"transition"]=o+"transform "+n+"s linear",t.css(e)},d="ontouchstart"in t,b=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,m=function(t){if(d)return!0;if(!b||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};$.fn.imageLightbox=function(e){var o=$.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!0,button:!1,caption:!1,enableKeyboard:!0,lockBody:!1,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),g=function(){o.arrows&&C(this),o.navigation&&T(),o.overlay&&q(),o.button&&O(),o.caption&&f.append(r)},v=function(){o.activity&&k(),o.caption&&S()},x=function(){o.activity&&E(),o.arrows&&a.css("display","block")},y=function(){var t=M.index(P)-1;if(t<0){if(!0===o.quitOnEnd)return R(),!1;t=M.length-1}P=M.eq(t),f.trigger("previous.ilb2"),_(-1)},w=function(){var t=M.index(P)+1;if(t>=M.length){if(!0===o.quitOnEnd)return R(),!1;t=0}P=M.eq(t),f.trigger("next.ilb2"),_(1)},k=function(){f.append(n)},E=function(){$(".imagelightbox-loading").remove()},q=function(){f.append(c)},O=function(){l.appendTo(f).on("click.ilb7",function(){return R(),!1})},S=function(){r.html("&nbsp;"),$(P).data("ilb2-caption")?r.html($(P).data("ilb2-caption")):$(P).find("img").length>0&&r.html($(P).find("img").attr("alt"))},T=function(){if(M.length){for(var t=0;t<M.length;t++)u.append(s.clone());var i=u.children("a");i.eq(M.index(P)).addClass("active"),f.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(M.index(P)).addClass("active")}),f.append(u),u.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=$(this);if(M.eq(t.index()).attr("href")!==$(".imagelightbox").attr("src")){var i=M.eq(t.index());i.length&&(B=M.index(P),P=i,_(t.index()<B?-1:1))}t.addClass("active").siblings().removeClass("active")})}},C=function(){f.append(a),a.on("click.ilb7 touchend.ilb7",function(t){return t.preventDefault(),$(this).hasClass("imagelightbox-arrow-left")?y():w(),!1})},I="",M=$([]),P=$(),D=$(),X=0,L=0,N=0,j=!1,B=0,K=function(t){function n(t){var n=i.createElement("a"),e={},o,a,r;for(n.href=t,o=n.search.replace(/^\?/,"").split("&"),r=0;r<o.length;r++)a=o[r].split("="),e[a[0]]=a[1];return{protocol:n.protocol,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchObject:e,hash:n.hash}}var e=o.allowedTypes;if(!/^(?!\|)[\w\|]+(?!\|)$/.test(e))return!1;var a=t.attr("href"),r=n(a).pathname;return new RegExp(e,"i").test(r)},U=function(){if(!D.length)return!0;var i=r.outerHeight(),n=.8*$(t).width(),e=(t.innerHeight?t.innerHeight:$(t).height())-i,o=.9*e,a=new Image;a.src=D.attr("src"),a.onload=function(){if(X=a.width,L=a.height,X>n||L>o){var i=X/L>n/o?X/n:L/o;X/=i,L/=i}D.css({width:X+"px",height:L+"px",top:(e-L)/2+"px",left:($(t).width()-X)/2+"px"})}},_=function(t){if(j)return!1;if(D.length){var i={opacity:0};h?p(D,100*t-N+"px",o.animationSpeed/1e3):i.left=parseInt(D.css("left"))+100*t+"px",D.animate(i,o.animationSpeed,function(){z()}),N=0}j=!0,v(),setTimeout(function(){var i=P.attr("href");D=$('<img id="'+o.id+'" />').attr("src",i).on("load.ilb7",function(){f.trigger("loaded.ilb2");var i={opacity:1};if(D.appendTo(f),U(),D.css("opacity",0),h)p(D,-100*t+"px",0),setTimeout(function(){p(D,"0px",o.animationSpeed/1e3)},50);else{var n=parseInt(D.css("left"));i.left=n+"px",D.css("left",n-100*t+"px")}if(D.animate(i,o.animationSpeed,function(){j=!1,x()}),o.preloadNext){var e=M.eq(M.index(P)+1);e.length||(e=M.eq(0)),$("<img />").attr("src",e.attr("href"))}}).on("error.ilb7",function(){x()});var n=0,e=0,a=0;D.on(b?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),o.quitOnImgClick)return R(),!1;if(m(t.originalEvent))return!0;var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;X/2>i?y():w()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){if(!m(t.originalEvent)||o.quitOnImgClick)return!0;h&&(a=parseInt(D.css("left"))),n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){if(!b&&"pointermove"===t.type||!m(t.originalEvent)||o.quitOnImgClick)return!0;t.preventDefault(),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,N=n-e,h?p(D,-N+"px",0):D.css("left",a-N+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){if(!m(t.originalEvent)||o.quitOnImgClick)return!0;Math.abs(N)>50?N<0?y():w():h?p(D,"0px",o.animationSpeed/1e3):D.animate({left:a+"px"},o.animationSpeed/2)})},o.animationSpeed+100)},z=function(){if(!D.length)return!1;D.remove(),D=$()},H=function(t){if(j)return!1;j=!1,P=t,g(),$("body").append(f),o.lockBody&&$("body").addClass("imagelightbox-scroll-lock"),f.trigger("start.ilb2"),_(0)},R=function(){if(f.trigger("quit.ilb2"),o.lockBody&&$("body").removeClass("imagelightbox-scroll-lock"),!D.length)return!1;D.animate({opacity:0},o.animationSpeed,function(){z(),j=!1,M=$([]),f.remove().find("*").remove()})},Y=function(t){function i(){t.filter(function(){return $(this).data("imagelightbox")===I}).filter(function(){return K($(this))}).each(function(){M=M.add($(this))})}t.on("click.ilb7",{set:I},function(t){t.preventDefault(),I=$(t.currentTarget).data("imagelightbox"),i(),M.length<1?R():H($(this))})};return $(t).on("resize.ilb7",U),$(i).ready(function(){o.quitOnDocClick&&$(i).on(d?"touchend.ilb7":"click.ilb7",function(t){D.length&&!$(t.target).is(D)&&(t.preventDefault(),R())}),o.lockBody&&$(i).on("keydown.ilb7",function(t){return!D.length||([9,32,38,40].indexOf(t.which)>-1?(t.preventDefault(),!1):void 0)}),o.enableKeyboard&&$(i).on("keyup.ilb7",function(t){if(!D.length)return!0;t.preventDefault(),[27].indexOf(t.which)>-1&&o.quitOnEscKey&&R(),[37].indexOf(t.which)>-1?y():[39].indexOf(t.which)>-1&&w()})}),$(i).off("click",o.selector),Y($(this)),this.addToImageLightbox=function(t){Y(t)},this.loadPreviousImage=function(){y()},this.loadNextImage=function(){w()},this.quitImageLightbox=function(){return R(),this},this.startImageLightbox=function(){$(this).trigger("click.ilb7")},this}}(jQuery,window,document);